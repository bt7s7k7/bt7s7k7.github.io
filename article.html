<!DOCTYPE html>
<html>
<head>
	<script src="stuff/bUtils.js"></script>
	<link rel="stylesheet" type="text/css" href="stuff/btStyle.css">
	<link rel="stylesheet" type="text/css" href="stuff/newStyle.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title id="title"></title>
	<script>
		/**
		  * @typedef {{ name: string, url: string, series: string }} ArticleDefinition
		  * @type {ArticleDefinition[]}
		  */
		var articles = []
		function setup() {
			if (!("index" in B.get)) {
				location.replace("./index.html")
				return
			}

			var finish = (() => {
				var found = false
				var targetIndex = 0
				var index = parseInt(B.get.index)
				if (isNaN(index)) index = articles.length - 1
				if (index < 0) index = 0
				if (index >= articles.length) index = articles.length - 1
				var curr = articles[index];
				B.request(curr.url).then((request) => {
					E.articleParent.innerHTML = request.responseText
				})
				
				E.articleHeader.innerText = curr.name;
				targetIndex = index
				E.title.innerText = "Článok :: " + curr.name;

				if (targetIndex != 0) {
					E.first.href = "?index=" + 0
					E.prev.href = "?index=" + targetIndex - 1
				} else {
					E.prev.style.color = "lightgrey"
					E.first.style.color = "lightgrey"
				}
				if (targetIndex + 1 < articles.length) {
					E.next.href = "?index=" + targetIndex + 1
					E.last.href = "?index=" + articles.length - 1
				} else {
					E.next.style.color = "lightgrey"
					E.last.style.color = "lightgrey"
				}
			})

			B.request("./articleList.json").then((request) => {
				var array = JSON.parse(request.responseText)
				articles = array
				finish()
			})
		}
	</script>
	<style>
		.en {
			display: none
		}

		.ignA {
			color: black;
			text-decoration: none
		}

		.figure {
			margin: 40px auto 40px auto;
			max-width: 90%;
			display: block;
		}

		.note {
			padding: 10px;
			border-left: 5px lightgrey solid;
			margin: 20px auto 20px auto;
			color: #808080
		}

		code {
			background-color: lightgray;
		}

		.codeBlock {
			display: block;
			margin: 20px auto 20px auto;
			padding: 10px;
			max-width: 100%;
			overflow: auto;
			white-space: nowrap;
		}
	</style>
</head>
<body>
	<header id="articleHeader" class="canScroll noWrap"></header>
	<div style="padding: 10px; box-sizing: border-box; margin-left: 200px; margin-right: 200px; background-color: white;">
		<div id="articleParent"></div>
		<div style="margin: 0 auto 0 auto; text-align: center">
			<a id="first" class="ignA"><<</a>
			<a id="prev" class="ignA"><</a>
			<a id="all" class="ignA" href="./index.html">O</a>
			<a id="next" class="ignA">></a>
			<a id="last" class="ignA">>></a>
		</div>
	</div>
</body>
</html>